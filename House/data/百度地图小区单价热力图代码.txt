<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=您的密钥"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
    <title>热力图功能示例</title>
    <style type="text/css">
		ul,li{list-style: none;margin:0;padding:0;float:left;}
		html{height:100%}
		body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}
		#container{height:1000px;width:100%;}
		#r-result{width:100%;}
    </style>	
</head>
<body>
	<div id="container"></div>
	<div id="r-result">
		<input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>
	</div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例

    var point = new BMap.Point(116.418261, 39.921984);
    map.centerAndZoom(point, 15);             // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(); // 允许滚轮缩放
  
    var points =[
    
{"lng":116.247008,"lat":39.906426,"count":53.2670},
{"lng":116.621507,"lat":39.933755,"count":37.5570},
{"lng":116.511545,"lat":39.904464,"count":46.5350},
{"lng":116.220283,"lat":40.043636,"count":52.5330},
{"lng":116.622063,"lat":39.931519,"count":41.0550},
{"lng":116.521774,"lat":39.94004,"count":62.0570},
{"lng":116.347998,"lat":40.087773,"count":48.2210},
{"lng":116.50404,"lat":39.814896,"count":27.5620},
{"lng":116.42376,"lat":40.0514,"count":53.4370},
{"lng":116.458721,"lat":39.817347,"count":46.8970},
{"lng":116.445628,"lat":40.0364,"count":46.7650 },
{"lng":116.58468,"lat":39.935758,"count":59.5640},
{"lng":116.566589,"lat":39.852939,"count":41.8690},
{"lng":116.324979,"lat":39.852231,"count":68.5730},
{"lng":116.425304,"lat":40.112553,"count":23.3310},
{"lng":116.422621,"lat":40.03926,"count":62.6010},
{"lng":116.315096,"lat":39.857138,"count":49.2440},
{"lng":116.518849,"lat":39.931002,"count":79.5880},
{"lng":116.425766,"lat":39.985931,"count":73.4060},
{"lng":116.45053,"lat":39.874376,"count":54.5300},
{"lng":116.257104,"lat":39.873962,"count":62.3620},
{"lng":116.258665,"lat":39.906687,"count":68.7990},
{"lng":116.380393,"lat":39.843844,"count":47.3650},
{"lng":116.425063,"lat":40.044097,"count":55.2920},
{"lng":116.339882,"lat":39.82826,"count":44.5700},
{"lng":116.321999,"lat":39.852545,"count":49.5960},
{"lng":116.418863,"lat":40.033442,"count":77.4360},
{"lng":116.648674,"lat":39.899289,"count":40.0400},
{"lng":116.470465,"lat":39.803697,"count":47.1040},
{"lng":116.419618,"lat":39.845427,"count":52.0410},
{"lng":116.703234,"lat":39.911017,"count":49.6110},
{"lng":116.483539,"lat":39.930342,"count":66.6790},
{"lng":116.37785,"lat":39.842419,"count":61.5670},
{"lng":116.419296,"lat":39.853261,"count":55.1730},
{"lng":116.312396,"lat":39.884145,"count":60.7380},
{"lng":116.375366,"lat":39.958063,"count":96.8640},
{"lng":116.334045,"lat":39.757413,"count":54.2230},
{"lng":116.429293,"lat":39.872461,"count":66.1720},
{"lng":116.549499,"lat":39.746067,"count":38.7520},
{"lng":116.566103,"lat":39.92841,"count":52.0390},
{"lng":116.690886,"lat":39.887582,"count":48.2510},
{"lng":116.343992,"lat":40.078436,"count":43.4690},
{"lng":116.284755,"lat":39.93453,"count":70.0130},
{"lng":116.437025,"lat":40.059329,"count":79.1450},
{"lng":116.414419,"lat":40.053455,"count":48.2470},
{"lng":116.646296,"lat":40.132553,"count":46.4650},
{"lng":116.378344,"lat":39.875262,"count":69.6480},
{"lng":116.331754,"lat":40.051652,"count":61.6110},
{"lng":116.346109,"lat":39.756539,"count":51.9560},
{"lng":116.358543,"lat":40.017542,"count":83.8920},
{"lng":116.401854,"lat":39.861344,"count":52.7880},
{"lng":116.364365,"lat":40.069487,"count":58.5190},
{"lng":116.432802,"lat":40.043409,"count":50.8550},
{"lng":116.586465,"lat":39.918172,"count":49.0760},
{"lng":116.170695,"lat":39.773701,"count":33.4550},
{"lng":116.374708,"lat":39.854229,"count":66.2000},
{"lng":116.268601,"lat":39.933567,"count":68.7720},
{"lng":116.242945,"lat":40.215684,"count":37.9690},
{"lng":116.454135,"lat":39.850772,"count":54.1050},
{"lng":116.41782,"lat":40.060802,"count":49.7480},
{"lng":116.670101,"lat":40.118729,"count":35.6510},
{"lng":116.315943,"lat":40.060937,"count":72.5360},
{"lng":116.665923,"lat":40.186753,"count":32.0340},
{"lng":116.391671,"lat":39.845707,"count":65.2810},
{"lng":116.471006,"lat":40.016871,"count":112.5510 },
{"lng":116.291708,"lat":39.844912,"count":56.8220},
{"lng":116.560389,"lat":40.094933,"count":50.8100},
{"lng":116.438762,"lat":39.854215,"count":50.3810},
{"lng":116.372543,"lat":39.927054,"count":160.7780 },
{"lng":116.557273,"lat":39.918665,"count":51.0490},
{"lng":116.649455,"lat":40.141789,"count":40.8900},
{"lng":116.409861,"lat":40.042394,"count":65.7080},
{"lng":116.654682,"lat":40.125799,"count":31.5900},
{"lng":116.162938,"lat":39.939005,"count":43.6680},
{"lng":116.619353,"lat":39.931048,"count":52.4990},
{"lng":116.368557,"lat":40.072913,"count":64.4210},
{"lng":116.483671,"lat":39.895896,"count":93.3670},
{"lng":116.210318,"lat":39.916082,"count":50.7710},
{"lng":116.154608,"lat":39.726495,"count":26.5110},
{"lng":116.3228,"lat":40.070476,"count":55.7080 },
{"lng":116.315028,"lat":39.900525,"count":79.0910},
{"lng":116.369971,"lat":39.856204,"count":57.0070},
{"lng":116.442526,"lat":39.972399,"count":86.3160},
{"lng":116.233846,"lat":39.905003,"count":50.3930},
{"lng":116.416806,"lat":40.065593,"count":36.3050},
{"lng":116.638919,"lat":39.900576,"count":49.3570},
{"lng":116.491708,"lat":40.003156,"count":84.5980},
{"lng":116.438986,"lat":39.853197,"count":50.3810},
{"lng":116.468703,"lat":40.014224,"count":96.9000},
{"lng":116.471754,"lat":40.02946,"count":66.6540},
{"lng":116.6512,"lat":39.898186,"count":45.6110 },
{"lng":116.366841,"lat":40.085494,"count":44.7620},
{"lng":116.491708,"lat":40.003156,"count":84.5980},
{"lng":116.428389,"lat":39.99699,"count":64.4320},
{"lng":116.439326,"lat":39.821816,"count":51.0070},
{"lng":116.342088,"lat":39.749733,"count":51.9560},
{"lng":116.212774,"lat":39.767185,"count":48.8710},
{"lng":116.469248,"lat":40.012773,"count":72.8500},
{"lng":116.258553,"lat":39.898064,"count":48.0000},
{"lng":116.265066,"lat":40.166068,"count":47.4220},
{"lng":116.801963,"lat":40.009682,"count":29.3660},
{"lng":116.369206,"lat":39.856287,"count":57.0070},
{"lng":116.2737,"lat":40.172379,"count":47.4220 },
{"lng":116.188935,"lat":40.054103,"count":52.5330},
{"lng":116.45457,"lat":39.809878,"count":45.3200},
{"lng":116.42257,"lat":39.981146,"count":75.4190},
{"lng":116.444891,"lat":40.059981,"count":89.3770},
{"lng":116.402567,"lat":39.869745,"count":56.3070},
{"lng":116.270635,"lat":40.172195,"count":44.0380},
{"lng":116.427825,"lat":40.046804,"count":59.0360},
{"lng":116.828287,"lat":39.970903,"count":30.5880},
{"lng":116.508181,"lat":39.807662,"count":27.5620},
{"lng":116.780446,"lat":39.987782,"count":29.3660},
{"lng":116.667038,"lat":39.942451,"count":38.5930},
{"lng":116.417866,"lat":40.134243,"count":37.8890},
{"lng":116.476921,"lat":39.983744,"count":72.2780},
{"lng":116.310598,"lat":39.967559,"count":118.3440 },
{"lng":116.20082,"lat":39.916867,"count":49.2420},
{"lng":116.235511,"lat":39.93305,"count":61.4150},
{"lng":116.491708,"lat":40.003156,"count":84.5980},
{"lng":116.60292,"lat":39.909042,"count":42.6350},
{"lng":116.617204,"lat":39.928735,"count":50.0940},
{"lng":116.490126,"lat":39.920449,"count":84.1220},
{"lng":116.356102,"lat":39.950445,"count":99.3820},
{"lng":116.559953,"lat":40.117154,"count":44.4130},
{"lng":116.441424,"lat":39.813718,"count":41.0370},
{"lng":116.479295,"lat":39.997662,"count":62.8330},
{"lng":116.703689,"lat":39.881771,"count":47.4840},
{"lng":116.796374,"lat":39.952636,"count":30.1000},
{"lng":116.175666,"lat":39.773192,"count":34.1280},
{"lng":116.660144,"lat":40.120667,"count":46.4090},
{"lng":116.441493,"lat":39.863696,"count":54.3050},
{"lng":116.779959,"lat":39.979875,"count":29.6650},
{"lng":116.325575,"lat":39.88657,"count":71.7780},
{"lng":116.797257,"lat":39.954145,"count":28.3560},
{"lng":116.551782,"lat":39.742837,"count":30.3830},
{"lng":116.543161,"lat":40.097129,"count":45.8050},
{"lng":116.340938,"lat":39.76265,"count":41.9680},
{"lng":116.26973,"lat":39.901123,"count":55.1750},
{"lng":116.468592,"lat":40.028148,"count":81.8010},
{"lng":116.229975,"lat":39.898779,"count":59.2640},
{"lng":116.603852,"lat":39.893276,"count":44.6180},
{"lng":116.697632,"lat":39.920038,"count":55.0150},
{"lng":116.678059,"lat":40.21342,"count":31.1710},
{"lng":116.675955,"lat":40.037646,"count":30.8660},
{"lng":116.333603,"lat":39.892188,"count":0.0000},
{"lng":116.659297,"lat":40.14532,"count":39.8670},
{"lng":116.561056,"lat":40.112912,"count":56.7720},
{"lng":116.508046,"lat":39.799319,"count":48.1130},
{"lng":116.297141,"lat":39.789471,"count":48.5050},
{"lng":116.605239,"lat":40.134877,"count":32.6920},
{"lng":116.415732,"lat":40.053385,"count":59.7390},
{"lng":116.370471,"lat":39.919146,"count":163.5100 },
{"lng":116.361705,"lat":39.761336,"count":42.8350},
{"lng":116.31364,"lat":39.987352,"count":111.5840},
{"lng":116.438901,"lat":39.970424,"count":70.7430},
{"lng":116.221728,"lat":39.912208,"count":52.2880},
{"lng":116.437968,"lat":39.959943,"count":90.4730},
{"lng":116.342093,"lat":39.731799,"count":47.0810},
{"lng":116.659056,"lat":40.14159,"count":45.0840},
{"lng":116.6709,"lat":40.137772,"count":43.7500 },
{"lng":116.269851,"lat":39.897262,"count":50.5020},
{"lng":116.51791,"lat":39.800164,"count":18.8030},
{"lng":116.688628,"lat":40.123965,"count":29.2170},
{"lng":116.415638,"lat":40.055428,"count":52.6830},
{"lng":116.605035,"lat":40.051164,"count":36.1640},
{"lng":116.648559,"lat":39.894325,"count":54.2070},
{"lng":116.85037,"lat":39.963617,"count":27.1580},
{"lng":116.341153,"lat":39.734779,"count":44.8640},
{"lng":116.221857,"lat":39.767955,"count":46.4570},
{"lng":116.213828,"lat":39.765558,"count":48.0150},
{"lng":116.272216,"lat":39.933962,"count":68.7720},
{"lng":116.567799,"lat":39.909436,"count":27.9050},
{"lng":116.580275,"lat":39.929291,"count":48.5990},
{"lng":116.794444,"lat":39.964396,"count":22.8400},
{"lng":116.77441,"lat":39.980612,"count":28.6990},
{"lng":116.336897,"lat":40.062254,"count":59.0820},
{"lng":116.798607,"lat":39.957451,"count":30.8850},
{"lng":116.625568,"lat":40.137845,"count":38.4170},
{"lng":116.708466,"lat":39.925012,"count":53.6310},
{"lng":116.432824,"lat":39.853449,"count":50.5700},
{"lng":116.426743,"lat":39.868762,"count":61.1090},
{"lng":116.676119,"lat":39.875612,"count":43.4100},
{"lng":116.340971,"lat":39.741186,"count":43.5130},
{"lng":116.439254,"lat":39.811499,"count":47.8870},
{"lng":116.435236,"lat":39.90518,"count":93.0360},
{"lng":116.195155,"lat":39.920866,"count":47.5510},
{"lng":116.205391,"lat":39.916637,"count":51.8200},
{"lng":116.235366,"lat":40.216037,"count":32.1120},
{"lng":116.333603,"lat":39.743229,"count":43.5130},
{"lng":116.655693,"lat":40.180093,"count":38.1770},
{"lng":116.785273,"lat":39.987936,"count":28.6990},
{"lng":116.668841,"lat":40.113345,"count":37.2630},
{"lng":116.236519,"lat":39.898977,"count":64.1460},
{"lng":116.421209,"lat":40.046624,"count":70.8700},
{"lng":116.308648,"lat":40.059182,"count":81.5960},
{"lng":116.387533,"lat":39.986544,"count":82.3190},
{"lng":116.406687,"lat":39.721523,"count":42.7880},
{"lng":116.419561,"lat":40.063693,"count":50.5830},
{"lng":116.561978,"lat":39.877145,"count":41.3840},
{"lng":116.384345,"lat":39.882803,"count":100.7260 },
{"lng":116.448937,"lat":39.80951,"count":37.7630},
{"lng":116.341599,"lat":39.726005,"count":39.5290},
{"lng":116.669988,"lat":40.116534,"count":36.5670},
{"lng":116.475239,"lat":39.938541,"count":68.1650},
{"lng":116.319336,"lat":39.827336,"count":66.3060},
{"lng":116.421128,"lat":40.068301,"count":58.9070},
{"lng":116.675236,"lat":40.039656,"count":30.8660},
{"lng":116.255629,"lat":39.925357,"count":54.9680},
{"lng":116.344664,"lat":39.802705,"count":44.2510},
{"lng":116.422479,"lat":40.06389,"count":58.9070},
{"lng":116.511924,"lat":39.977661,"count":49.4590},
{"lng":116.341294,"lat":39.744861,"count":43.6670},
{"lng":116.36695,"lat":40.079241,"count":51.5480},
{"lng":116.795924,"lat":39.965085,"count":22.8400},
{"lng":116.806257,"lat":39.980086,"count":22.8400},
{"lng":116.578313,"lat":39.907903,"count":27.9050},
{"lng":116.417338,"lat":39.939479,"count":104.6030 },
{"lng":116.354697,"lat":39.745721,"count":36.7980},
{"lng":116.128533,"lat":39.723864,"count":27.6860},
{"lng":116.442813,"lat":39.859625,"count":54.2370},
{"lng":116.265831,"lat":39.898231,"count":55.6050},
{"lng":116.43801,"lat":40.076114,"count":40.2160},
{"lng":116.63264,"lat":39.913741,"count":44.0680},
{"lng":116.16711,"lat":39.738534,"count":25.9730},
{"lng":116.558192,"lat":40.162583,"count":29.7430},
{"lng":116.354548,"lat":39.733154,"count":30.9630},
{"lng":116.27162,"lat":39.888609,"count":52.7410},
{"lng":116.334817,"lat":39.884391,"count":82.7030},
{"lng":116.321661,"lat":39.751033,"count":29.8990},
{"lng":116.250886,"lat":40.225155,"count":38.7530},
{"lng":116.667208,"lat":39.885232,"count":46.2810},
{"lng":116.671487,"lat":40.213114,"count":36.9130},
{"lng":116.100772,"lat":39.944701,"count":29.2430},
{"lng":116.350909,"lat":39.745849,"count":36.7980},
{"lng":116.659218,"lat":40.128885,"count":46.4650},
{"lng":116.827137,"lat":39.920953,"count":24.2030},
{"lng":116.36203,"lat":39.745873,"count":42.1150},
{"lng":116.232119,"lat":40.223852,"count":34.6580},
{"lng":116.232004,"lat":39.912107,"count":48.0000},
{"lng":116.599448,"lat":40.048301,"count":41.5530},
{"lng":116.504857,"lat":39.906195,"count":47.1290},
{"lng":116.171634,"lat":39.763178,"count":19.2040},
{"lng":116.356793,"lat":40.085804,"count":46.7950},
{"lng":116.361488,"lat":40.073637,"count":48.8370},
{"lng":116.54268,"lat":39.756362,"count":34.6570},
{"lng":116.484608,"lat":39.995966,"count":63.4220},
{"lng":116.795924,"lat":39.96503,"count":22.8400},
{"lng":116.509064,"lat":39.929983,"count":62.9620},
{"lng":116.195775,"lat":39.912986,"count":47.5510},
{"lng":116.54671,"lat":39.760284,"count":35.4930},
{"lng":116.419649,"lat":40.05724,"count":56.4970},
{"lng":116.122491,"lat":39.939735,"count":41.1110},
{"lng":116.385869,"lat":39.772399,"count":42.7880},
{"lng":116.085261,"lat":39.720728,"count":26.5370},
{"lng":116.279545,"lat":40.144739,"count":38.3830},
{"lng":116.49932,"lat":39.981474,"count":57.1130},
{"lng":116.254035,"lat":40.205429,"count":31.5150},
{"lng":116.297652,"lat":40.212461,"count":31.2740},
{"lng":116.445474,"lat":40.05627,"count":74.3960},
{"lng":116.224012,"lat":39.763726,"count":41.6910},
{"lng":116.658082,"lat":39.92439,"count":41.9730},
{"lng":116.448753,"lat":39.820594,"count":43.2540},
{"lng":116.28592,"lat":39.935122,"count":85.2940},
{"lng":116.639467,"lat":39.904485,"count":46.9450},
{"lng":116.429408,"lat":40.058659,"count":65.6470},
{"lng":116.315345,"lat":39.986669,"count":60.9450},
{"lng":116.583271,"lat":39.909272,"count":46.6820},
{"lng":116.134573,"lat":39.746639,"count":34.5410},
{"lng":116.319905,"lat":39.692186,"count":31.8140},
{"lng":116.400058,"lat":40.189649,"count":27.1220},
{"lng":116.32963657379,"lat":39.74821285179,"count":51.2840 },
{"lng":116.44439,"lat":40.093691,"count":38.8550},
{"lng":116.575438,"lat":39.787405,"count":35.3080},
{"lng":116.329972,"lat":40.174041,"count":38.3830},
{"lng":116.328105,"lat":39.849492,"count":51.3290},
{"lng":116.157467,"lat":39.730412,"count":30.2900},
{"lng":116.339803,"lat":40.085341,"count":44.6720},
{"lng":116.437132,"lat":40.029448,"count":59.9700},
{"lng":116.632799,"lat":40.031538,"count":25.9500},
{"lng":116.655445,"lat":40.137574,"count":40.6190},
{"lng":116.350565,"lat":39.733387,"count":36.1990},
{"lng":116.232365,"lat":40.235529,"count":35.6930},
{"lng":116.572585,"lat":39.910962,"count":46.3400},
{"lng":116.322785,"lat":40.048025,"count":36.8900},
{"lng":116.605893,"lat":40.054165,"count":38.7380},
{"lng":116.254113,"lat":40.220461,"count":37.6350},
{"lng":116.524384,"lat":39.824643,"count":52.8440},
{"lng":116.196683,"lat":39.73818,"count":41.7200},
{"lng":116.226004,"lat":40.228767,"count":34.9460},
{"lng":116.372751,"lat":39.884391,"count":101.7100 },
{"lng":116.220898,"lat":39.767525,"count":46.4570},
{"lng":116.072514,"lat":39.678855,"count":26.5740},
{"lng":116.836261,"lat":39.955437,"count":25.7580},
{"lng":116.418195,"lat":40.053619,"count":30.6880},
{"lng":116.238706,"lat":39.854004,"count":41.2950},
{"lng":116.512554,"lat":39.929721,"count":52.4750},
{"lng":116.530566,"lat":39.827437,"count":54.8280},
{"lng":116.596558,"lat":39.926521,"count":57.3510},
{"lng":116.325461,"lat":40.045225,"count":75.4600},
{"lng":116.233676,"lat":40.231785,"count":31.6740},
{"lng":116.339799,"lat":39.770832,"count":74.7780},
{"lng":116.527753,"lat":39.828834,"count":37.3970},
{"lng":116.787285,"lat":39.969857,"count":29.6650},
{"lng":116.419454,"lat":40.065157,"count":44.3770},
{"lng":116.297684,"lat":39.837649,"count":47.0340},
{"lng":116.233193,"lat":39.895001,"count":51.9220},
{"lng":116.491697,"lat":39.976188,"count":56.9400},
{"lng":116.472097,"lat":39.875189,"count":50.2180},
{"lng":116.515457,"lat":40.029579,"count":64.0850},
{"lng":116.172813,"lat":39.765512,"count":39.1560},
{"lng":116.286636,"lat":39.846655,"count":53.3600},
{"lng":116.33189,"lat":39.730101,"count":40.9740},
{"lng":116.654713,"lat":40.185553,"count":42.9670},
{"lng":116.117724,"lat":39.941152,"count":35.2640},
{"lng":116.432558,"lat":39.847099,"count":54.6020},
{"lng":116.786491,"lat":40.001976,"count":33.3170},
{"lng":116.284571,"lat":39.88951,"count":83.8790},
{"lng":116.447271,"lat":40.048622,"count":46.7650},
{"lng":116.545553,"lat":40.103666,"count":58.7480},
{"lng":116.543995,"lat":39.747293,"count":29.0460},
{"lng":116.600019,"lat":40.057533,"count":35.8150},
{"lng":116.451095,"lat":39.863748,"count":53.5870},
{"lng":116.27072,"lat":39.866703,"count":41.8360},
{"lng":116.176687,"lat":39.731223,"count":34.1930},
{"lng":116.245538,"lat":40.220033,"count":36.8090},
{"lng":116.436604,"lat":39.852209,"count":52.4480},
{"lng":116.147569,"lat":39.903963,"count":34.9670},
{"lng":116.12215,"lat":39.932268,"count":38.0620},
{"lng":116.414265,"lat":39.862338,"count":57.9540},
{"lng":116.174509,"lat":39.774258,"count":34.1280},
{"lng":116.335905,"lat":39.722529,"count":41.4300},
{"lng":116.512253,"lat":39.77436,"count":41.7420},
{"lng":116.445885,"lat":39.864094,"count":52.3840},
{"lng":116.501327,"lat":39.794025,"count":47.9060},
{"lng":116.247416,"lat":39.843076,"count":42.4420},
{"lng":116.516283,"lat":39.875047,"count":49.9410},
{"lng":116.182666,"lat":39.728455,"count":30.2900},
{"lng":116.493465,"lat":39.869833,"count":59.7950},
{"lng":116.375607,"lat":39.916261,"count":161.1370 },
{"lng":116.141795,"lat":39.740479,"count":27.2800},
{"lng":116.599672,"lat":40.056821,"count":35.8150},
{"lng":116.228643,"lat":39.90865,"count":66.4560},
{"lng":116.123868,"lat":39.933799,"count":36.5920},
{"lng":116.456239,"lat":39.955125,"count":58.3570},
{"lng":116.244971,"lat":40.21774,"count":45.3000},
{"lng":116.077958,"lat":39.656478,"count":21.8180},
{"lng":116.166915,"lat":39.763393,"count":31.2540},
{"lng":116.234237,"lat":39.910707,"count":48.0000},
{"lng":116.424846,"lat":40.1565,"count":51.0100 },
{"lng":116.249496,"lat":40.221791,"count":36.8090},
{"lng":116.119726,"lat":39.940869,"count":41.1110},
{"lng":116.439769,"lat":39.855041,"count":52.8850},
{"lng":116.296204,"lat":40.155585,"count":31.6540},
{"lng":116.798268,"lat":39.963419,"count":22.8400},
{"lng":116.785327,"lat":39.99439,"count":31.4510},
{"lng":116.554732,"lat":39.760617,"count":34.8480},
{"lng":116.32933,"lat":39.685842,"count":48.3220},
{"lng":116.832545,"lat":39.954796,"count":25.4560},
{"lng":116.117019,"lat":39.93386,"count":41.1110},
{"lng":116.361906,"lat":40.087943,"count":46.7950},
{"lng":116.782061,"lat":39.970662,"count":29.6650},
{"lng":116.075459,"lat":39.733576,"count":27.1540},
{"lng":116.563472,"lat":40.12408,"count":52.5140},
{"lng":116.24369,"lat":40.221606,"count":42.3040},
{"lng":116.413298,"lat":39.897944,"count":73.6110},
{"lng":116.378225,"lat":39.747088,"count":32.5480},
{"lng":116.602008,"lat":40.055731,"count":37.8940},
{"lng":116.149599,"lat":39.905658,"count":41.0080},
{"lng":116.506392,"lat":39.810563,"count":29.2480},
{"lng":116.638264,"lat":40.079034,"count":38.5350},
{"lng":116.658337,"lat":40.147875,"count":39.8670},
{"lng":116.154663,"lat":39.741514,"count":24.7730},
{"lng":116.152629,"lat":39.757427,"count":29.2900},
{"lng":116.319982,"lat":39.754823,"count":48.5580},
{"lng":116.524418,"lat":39.941578,"count":81.2630},
{"lng":116.594451,"lat":39.777202,"count":25.2990},
{"lng":116.23899,"lat":40.216973,"count":24.8950},
{"lng":116.309584,"lat":39.919533,"count":100.6130 },
{"lng":116.190131,"lat":39.865082,"count":37.4040},
{"lng":116.228671,"lat":40.205721,"count":39.8850},
{"lng":116.479409,"lat":39.929394,"count":73.4900},
{"lng":116.137769,"lat":39.747036,"count":20.3640},
{"lng":116.784679,"lat":39.995518,"count":31.5100},
{"lng":116.073082,"lat":39.660414,"count":21.1280},
{"lng":116.337282,"lat":39.770622,"count":51.5520},
{"lng":116.242091,"lat":40.234477,"count":46.6440},
{"lng":116.135077,"lat":39.740429,"count":27.6780},
{"lng":116.945041,"lat":40.155287,"count":23.6280},
{"lng":116.830908,"lat":39.911861,"count":26.6820},
{"lng":116.445203,"lat":39.857139,"count":49.9900},
{"lng":116.157929,"lat":39.745926,"count":27.9740},
{"lng":116.460975,"lat":39.798966,"count":40.6530},
{"lng":116.279958,"lat":39.875248,"count":47.3160},
{"lng":116.160585,"lat":39.797765,"count":18.8950},
{"lng":116.564402,"lat":40.108073,"count":40.9110},
{"lng":116.507805,"lat":39.811249,"count":36.4770},
{"lng":116.349041,"lat":39.731851,"count":24.5550},
{"lng":116.218729,"lat":40.221509,"count":26.1250},
{"lng":116.338664,"lat":39.700356,"count":34.1130},
{"lng":116.217807,"lat":40.226415,"count":29.8510},
{"lng":116.238967,"lat":39.856628,"count":41.2950},
{"lng":116.116971,"lat":39.943729,"count":19.0810},
{"lng":116.66943,"lat":40.101955,"count":35.1410},
{"lng":116.373119,"lat":39.837624,"count":68.5720},
{"lng":116.141453,"lat":39.739637,"count":26.3120},
{"lng":116.154637,"lat":39.754184,"count":25.3100},
{"lng":116.784906,"lat":39.975415,"count":28.2570},
{"lng":116.119525,"lat":39.918613,"count":46.0690},
{"lng":116.601064,"lat":40.051325,"count":36.0240},
{"lng":116.480307,"lat":39.841535,"count":38.9010},
{"lng":116.153054,"lat":39.754816,"count":22.5940},
{"lng":116.266253,"lat":40.219976,"count":45.5580},
{"lng":116.072103,"lat":39.664195,"count":21.1280},
{"lng":116.687737,"lat":39.903084,"count":53.0220},
{"lng":116.190715,"lat":40.192485,"count":30.8810},
{"lng":116.846504,"lat":39.9692,"count":30.5880 },
{"lng":116.642694,"lat":39.893384,"count":55.6450},
{"lng":116.561925,"lat":39.745913,"count":38.7520},
{"lng":116.328202,"lat":39.62674,"count":28.0290},
{"lng":116.313005,"lat":39.846449,"count":61.9920},
{"lng":116.788403,"lat":40.000829,"count":33.3170},
{"lng":116.348504,"lat":40.043248,"count":64.2060},
{"lng":116.582841,"lat":39.770021,"count":25.2990},
{"lng":116.26324,"lat":39.89843,"count":55.4030 },
{"lng":116.147735,"lat":39.733339,"count":25.0240},
{"lng":116.66424,"lat":39.899598,"count":45.1610},
{"lng":116.181143,"lat":39.898311,"count":39.7610},
{"lng":116.319205,"lat":40.086148,"count":39.5210},
{"lng":116.110258,"lat":39.938303,"count":35.2440},
{"lng":116.132208,"lat":39.737271,"count":28.8900},
{"lng":116.11813,"lat":39.936118,"count":36.5920},
{"lng":116.529879,"lat":39.800752,"count":48.1130},
{"lng":116.822701,"lat":39.959076,"count":26.3830},
{"lng":116.832748,"lat":39.962135,"count":20.4360},
{"lng":116.876174,"lat":39.953757,"count":23.9190},
{"lng":116.159825,"lat":39.747289,"count":27.9740},
{"lng":116.184944,"lat":40.055169,"count":52.5330},
{"lng":116.328175,"lat":40.176528,"count":38.3830},
{"lng":116.59741,"lat":40.053178,"count":34.4770},
{"lng":116.15082,"lat":39.742294,"count":25.9730},
{"lng":116.81878,"lat":39.947951,"count":30.4150},
{"lng":116.274009,"lat":39.897969,"count":55.6050},
{"lng":116.792319,"lat":39.954841,"count":30.1000},
{"lng":116.145679,"lat":39.945014,"count":43.1740},
{"lng":116.395839,"lat":40.178076,"count":25.6700},
{"lng":116.60291,"lat":40.053976,"count":37.6210},
{"lng":116.526962,"lat":39.783392,"count":48.1130},
{"lng":116.104623,"lat":39.939443,"count":35.6140},
{"lng":116.46827,"lat":39.99957,"count":76.1340 },
{"lng":116.779868,"lat":39.977308,"count":30.9330},
{"lng":116.773054,"lat":39.973746,"count":29.6650},
{"lng":116.218428,"lat":39.829891,"count":40.6830},
{"lng":116.112792,"lat":39.942723,"count":36.7060},
{"lng":116.846026,"lat":39.958434,"count":24.7560},
{"lng":116.353803,"lat":39.727554,"count":31.8740},
{"lng":116.240555,"lat":40.205884,"count":45.3000},
{"lng":116.147645,"lat":39.746728,"count":27.6210},
{"lng":116.108486,"lat":39.944281,"count":31.6710},
{"lng":116.880219,"lat":39.958299,"count":23.4900},
{"lng":116.190636,"lat":40.190396,"count":27.7600},
{"lng":116.219325,"lat":40.23023,"count":30.7940},
{"lng":116.819653,"lat":39.948694,"count":30.4150},
{"lng":116.800463,"lat":39.962585,"count":32.2760},
{"lng":116.524925,"lat":39.791669,"count":18.8030},
{"lng":116.239192,"lat":40.230751,"count":31.6480},
{"lng":116.679497,"lat":40.227613,"count":36.7040},
{"lng":116.262642,"lat":40.128011,"count":27.4570},
{"lng":116.871864,"lat":40.379569,"count":23.7400},
{"lng":116.232159,"lat":39.910788,"count":51.3730},
{"lng":116.841067,"lat":39.954586,"count":26.5780},
{"lng":116.141006,"lat":39.741613,"count":27.0750},
{"lng":116.502089,"lat":39.806041,"count":53.4710},
{"lng":116.150641,"lat":39.745013,"count":28.9090},
{"lng":116.151209,"lat":39.742316,"count":25.9730},
{"lng":116.114782,"lat":39.938645,"count":40.3300},
{"lng":116.638264,"lat":40.079034,"count":38.5350},
{"lng":116.246274,"lat":40.234287,"count":36.2110},
{"lng":116.277933,"lat":39.894604,"count":52.7910},
{"lng":116.645822,"lat":39.912117,"count":50.8430},
{"lng":116.696179,"lat":39.940039,"count":47.7290},
{"lng":116.833096,"lat":39.950178,"count":26.6820},
{"lng":116.473645,"lat":40.008049,"count":74.5100},
{"lng":116.278031,"lat":39.96002,"count":96.1370},
{"lng":116.154591,"lat":39.749439,"count":28.5270},
{"lng":116.84828,"lat":39.95123,"count":24.7560 },
{"lng":116.80248,"lat":39.953587,"count":30.8210},
{"lng":116.35258,"lat":39.745228,"count":36.7980},
{"lng":116.816803,"lat":39.96929,"count":24.0970},
{"lng":116.072535,"lat":39.718885,"count":31.0630},
{"lng":116.880995,"lat":39.959629,"count":22.6350},
{"lng":116.111157,"lat":39.950867,"count":33.2080},
{"lng":116.108748,"lat":39.948932,"count":33.2080},
{"lng":116.842971,"lat":39.957012,"count":24.7560},
{"lng":116.41952,"lat":39.903296,"count":55.6530},
{"lng":116.35672,"lat":40.089881,"count":46.7760},
{"lng":116.828008,"lat":39.960127,"count":20.4360},
{"lng":116.401335,"lat":40.181686,"count":24.5330},
{"lng":116.177841,"lat":39.776771,"count":33.4550},
{"lng":116.06885,"lat":39.721588,"count":27.0100},
{"lng":116.508008,"lat":39.921656,"count":54.7120},
{"lng":116.61891,"lat":40.123157,"count":24.7550},
{"lng":116.21722,"lat":39.760449,"count":50.3420},
{"lng":116.202599,"lat":39.930855,"count":49.5910},
{"lng":116.652964,"lat":39.837945,"count":47.2750},
{"lng":116.877519,"lat":39.956037,"count":22.0560},
{"lng":116.209575,"lat":39.842881,"count":40.7750},
{"lng":117.009706,"lat":40.06775,"count":23.9190},
{"lng":116.121949,"lat":40.215899,"count":29.6210},
{"lng":116.431377,"lat":39.89086,"count":82.1810},
{"lng":116.784964,"lat":39.981324,"count":29.6650},
{"lng":116.804361,"lat":39.951423,"count":26.1610},
{"lng":116.400146,"lat":39.813895,"count":45.0090},
{"lng":116.127048,"lat":39.9557,"count":34.8980 },
{"lng":116.132908,"lat":40.248933,"count":21.6700},
{"lng":116.130164,"lat":40.243192,"count":25.8730},
{"lng":116.649453,"lat":40.144733,"count":40.8900},
{"lng":116.220915,"lat":39.767421,"count":46.4570},
{"lng":116.50372,"lat":39.792304,"count":47.9060},
{"lng":116.837399,"lat":39.951524,"count":26.5780},
{"lng":116.819947,"lat":39.972728,"count":26.1350},
{"lng":116.253786,"lat":39.882516,"count":61.4510},
{"lng":116.812817,"lat":39.949226,"count":27.2360},
{"lng":116.400336,"lat":40.182301,"count":33.6170},
{"lng":116.131543,"lat":40.25064,"count":21.6700},
{"lng":116.31752,"lat":39.854266,"count":55.7490},
{"lng":116.105696,"lat":39.938679,"count":40.5420},
{"lng":116.844166,"lat":39.954835,"count":26.2890},
{"lng":116.868351,"lat":39.954289,"count":23.4900},
{"lng":116.107182,"lat":39.945377,"count":40.5420},
{"lng":116.867232,"lat":39.958688,"count":22.0560},
{"lng":116.628608,"lat":39.842712,"count":47.5350},
{"lng":116.819665,"lat":39.959329,"count":26.1390},
{"lng":116.115676,"lat":39.945448,"count":35.0870},
{"lng":116.123723,"lat":39.735074,"count":29.5560},
{"lng":116.233596,"lat":40.233753,"count":33.8690},
{"lng":116.726308,"lat":39.863013,"count":55.0630},
{"lng":116.68188,"lat":39.905547,"count":54.0990},
{"lng":116.653175,"lat":40.135409,"count":39.1100},
{"lng":116.643895,"lat":39.907854,"count":40.8760},
{"lng":116.153085,"lat":39.746879,"count":26.2550},
{"lng":116.800041,"lat":39.966006,"count":30.8850},
{"lng":116.240293,"lat":40.22937,"count":46.6440},
{"lng":116.815497,"lat":39.947775,"count":30.4150},
{"lng":116.10172,"lat":39.959709,"count":29.1020},
{"lng":116.079018,"lat":39.658339,"count":21.8180},
{"lng":116.87714,"lat":39.956322,"count":22.0560},
{"lng":116.116839,"lat":39.964562,"count":39.5560},
{"lng":116.144059,"lat":40.246875,"count":18.6140},
{"lng":116.826019,"lat":39.955791,"count":26.3830},
{"lng":116.527076,"lat":39.9451,"count":65.7030 },
{"lng":116.247838,"lat":40.235853,"count":36.2110},
{"lng":116.092196,"lat":39.937342,"count":35.2440},
{"lng":116.418958,"lat":40.064962,"count":50.5830},
{"lng":116.09034,"lat":39.945245,"count":30.1160},
{"lng":116.67252,"lat":40.010252,"count":33.9090},
{"lng":116.149826,"lat":39.736277,"count":29.4000},
{"lng":116.237395,"lat":40.216976,"count":24.8950},
{"lng":116.237066,"lat":40.223053,"count":37.7390},
{"lng":116.832937,"lat":39.957632,"count":26.5780},
{"lng":116.457086,"lat":39.877614,"count":59.6590},
{"lng":116.129677,"lat":40.252758,"count":21.6700},
{"lng":116.322479,"lat":39.987474,"count":127.7620 },
{"lng":116.829419,"lat":39.958681,"count":30.5880},
{"lng":116.651122,"lat":39.910653,"count":40.8760},
{"lng":116.101988,"lat":39.961875,"count":29.1020},
{"lng":116.136098,"lat":40.241519,"count":18.6140},
{"lng":116.289133,"lat":39.876282,"count":66.5890},
{"lng":116.155439,"lat":39.738866,"count":32.5150},
{"lng":116.099346,"lat":39.960062,"count":29.1020},
{"lng":116.234827,"lat":40.220612,"count":36.2030},
{"lng":116.67107,"lat":39.898912,"count":47.2550},
{"lng":116.109372,"lat":39.94751,"count":29.2430},
{"lng":116.274117,"lat":40.225828,"count":35.3390},
{"lng":116.088576,"lat":39.945736,"count":32.5700},
{"lng":116.821955,"lat":39.958437,"count":30.4150},
{"lng":116.219766,"lat":40.191987,"count":36.1860},
{"lng":116.112083,"lat":39.966084,"count":31.2180},
{"lng":116.141967,"lat":40.244137,"count":22.1660},
{"lng":116.840057,"lat":39.955079,"count":27.1580},
{"lng":116.326059,"lat":39.858167,"count":66.1590},
{"lng":116.242972,"lat":40.245064,"count":33.8690},
{"lng":116.835099,"lat":39.959549,"count":33.6010},
{"lng":116.835851,"lat":39.948905,"count":34.1410},
{"lng":116.810264,"lat":39.97034,"count":26.1390},
{"lng":116.819188,"lat":39.965122,"count":28.8060},
{"lng":116.665937,"lat":40.218687,"count":31.1710},
{"lng":116.105502,"lat":39.946304,"count":37.3100},
{"lng":116.137765,"lat":40.243738,"count":22.8380},
{"lng":116.141367,"lat":40.245369,"count":18.6140},
{"lng":116.199318,"lat":39.814338,"count":46.3840}
    ];
   
    if(!isSupportCanvas()){
    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
	//详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
	//参数说明如下:
	/* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小   
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
			.2:'rgb(0, 255, 255)',
			.5:'rgb(0, 110, 255)',
			.8:'rgb(100, 0, 255)'
		}
		其中 key 表示插值的位置, 0~1. 
		    value 为颜色值. 
     */
	heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":20});
	map.addOverlay(heatmapOverlay);
	heatmapOverlay.setDataSet({data:points,max:100});
	//是否显示热力图
    function openHeatmap(){
        heatmapOverlay.show();
    }
	function closeHeatmap(){
        heatmapOverlay.hide();
    }
	closeHeatmap();
    function setGradient(){
     	/*格式如下所示:
		{
	  		0:'rgb(102, 255, 0)',
	 	 	.5:'rgb(255, 170, 0)',
		  	1:'rgb(255, 0, 0)'
		}*/
     	var gradient = {};
     	var colors = document.querySelectorAll("input[type='color']");
     	colors = [].slice.call(colors,0);
     	colors.forEach(function(ele){
			gradient[ele.getAttribute("data-key")] = ele.value; 
     	});
        heatmapOverlay.setOptions({"gradient":gradient});
    }
	//判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>